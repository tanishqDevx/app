import { NextRequest } from 'next/server';


const roll_range = [
"501","502","503","504","505","506","507","508","509","50a","50b","50c","50d","50e","50f","50g","50h","50j","50k","50l","50m","50n","50p","50q","50r",
"50t","50u","50v","50w","50x","50y","50z","511","512","513","514","515","516","517","518","519","51a","51b","51c","51d","51e","51f","51g","51h","51j",
"51k","51l","51m","51n","51p","51q","51r","51t","51u","51v","51w","51x","51y","51z","5k1","5k2","5k3","521","522","523","524","525","526","527","528",
"529","52a","52b","52c","52d","52e","52f","52g","52h","52j","52k","52l","52m","52n","52p","52q","52r","52t","52u","52v","52w","52x","52y","52z","531",
"532","533","534","535","536","537","538","539","53a","53b","53c","53d","53e","53f","53g","53h","53j","53k","53l","53m","53n","53p","53q","53r","53t",
"53u","53v","53w","53x","53y","53z","5k4","5k5","541","542","543","544","545","546","547","548","549","54a","54b","54c","54d","54e","54f","54g","54h",
"54j","54k","54l","54m","54n","54p","54q","54r","54t","54u","54v","54w","54x","54y","54z","551","552","553","554","555","556","557","558","559","55a",
"55b","55c","55d","55e","55f","55g","55h","55j","55k","55l","55m","55n","55p","55q","55r","55t","55u","55v","55w","55x","55y","561","562","563","564",
"565","566","567","568","569","56a","56b","56c","56d","56e","56f","56g","56h","56j","56k","56l","56m","56n","56p","56q","56r","56t","56u","56v","56w",
"56x","56y","56z","571","572","573","574","575","576","577","578","579","57a","57b","57c","57d","57e","57f","57g","57h","57j","57k","57l","57m","57n",
"57p","57q","57r","57t","57u","57v","57w","57x","57y","57z","5k6","5k7","581","582","583","584","585","586","587","588","589","58a","58b","58c","58d",
"58e","58f","58g","58h","58j","58k","58l","58m","58n","58p","58q","58r","58t","58u","58v","58w","58x","58y","58z","591","592","593","594","595","596",
"597","598","599","59a","59b","59c","59d","59e","59f","59g","59h","59j","59k","59l","59m","59n","59p","59q","59r","59t","59u","59v","59w","59x","59y",
"59z","5k8","5a1","5a2","5a3","5a4","5a5","5a6","5a7","5a8","5a9","5aa","5ab","5ac","5ad","5ae","5af","5ag","5ah","5aj","5ak","5al","5am","5an","5ap",
"5aq","5ar","5at","5au","5av","5aw","5ax","5ay","5az","5b1","5b2","5b3","5b4","5b5","5b6","5b7","5b8","5b9","5ba","5bb","5bc","5bd","5be","5bf","5bg",
"5bh","5bj","5bk","5bl","5bm","5bn","5bp","5bq","5br","5bt","5bu","5bv","5bw","5bx","5by","5bz","5c1","5c2","5c3","5c4","5c5","5c6","5c7","5c8","5c9",
"5ca","5cb","5cc","5cd","5ce","5cf","5cg","5ch","5cj","5ck","5cl","5cm","5cn","5cp","5cq","5cr","5ct","5cu","5cv","5cw","5cx","5cy","5cz","5d1","5d2",
"5d3","5d4","5d5","5d6","5d7","5d8","5d9","5da","5db","5dc","5dd","5de","5df","5dg","5dh","5dj","5dk","5dl","5dm","5dn","5dp","5dq","5dr","5dt","5du",
"5dv","5dw","5dx","5dy","5dz","5k8","5e1","5e2","5e3","5e4","5e5","5e6","5e7","5e8","5e9","5ea","5eb","5ec","5ed","5ee","5ef","5eg","5eh","5ej","5ek",
"5el","5em","5en","5ep","5eq","5er","5et","5eu","5ev","5ew","5ex","5ey","5ez","5f1","5f2","5f3","5f4","5f5","5f6","5f7","5f8","5f9","5fa","5fb","5fc",
"5fd","5fe","5ff","5fg","5fh","5fj","5fk","5fl","5fm","5fn","5fp","5fq","5fr","5ft","5fu","5fv","5fw","5fx","5g1","5g2","5g3","5g4","5g5","5g6","5g7",
"5g8","5g9","5ga","5gb","5gc","5gd","5ge","5gf","5gg","5gh","5gj","5gk","5gl","5gm","5gn","5gp","5gq","5gr","5gt","5gu","5gv","5gw","5gx","5gy","5gz",
"5h1","5h2","5h3","5h4","5h5","5h6","5h7","5h8","5h9","5ha","5hb","5hc","5hd","5he","5hf","5hg","5hh","5hj","5hk","5hl","5hm","5hn","5hp","5hq","5hr",
"5ht","5hu","601","602","603","604","605","606","607","608","609","60a","60b","60c","60d","60e","60f","60g","60h","60j","60k","60l","60m","60n","60p",
"60q","60r","60t","60u","60v","60w","60x","60y","60z","611","612","613","614","615","616","617","618","619","61a","61b","61c","61d","61e","61f","61g",
"61h","61j","61k","61l","61m","61n","61p","61q","61r","61t","61u","61v","61w","61x","61y","61z","6k1","621","622","623","624","625","626","627","628",
"629","62a","62b","62c","62d","62e","62f","62g","62h","62j","62k","62l","62m","62n","62p","62q","62r","62t","62u","62v","62w","62x","62y","62z","631",
"632","633","634","635","636","637","638","639","63a","63b","63c","63d","63e","63f","63g","63h","63j","63k","63l","63m","63n","63p","63q","63r","63t",
"63u","63v","63w","63x","63y","63z","6k2","641","642","643","644","645","646","647","648","649","64a","64b","64c","64d","64e","64f","64g","64h","64j",
"64k","64l","64m","64n","64p","64q","64r","64t","64u","64v","64w","64x","64y","64z","651","652","653","654","655","656","657","658","659","65a","65b",
"65c","65d","65e","65f","65g","65h","65j","65k","65l","65m","65n","65p","65q","65r","65t","65u","65v","65w","65x","65y","65z","6k3","661","662","663",
"664","665","666","667","668","669","66a","66b","66c","66d","66e","66f","66g","66h","66j","66k","66l","66m","66n","66p","66q","66r","66t","66u","66v",
"66w","66x","66y","66z","671","672","673","674","675","676","677","678","679","67a","67b","67c","67d","67e","67f","67g","67h","67j","67k","67l","67m",
"67n","67p","67q","67r","67t","67u","67v","67w","67x","67y","67z","681","682","683","684","685","686","687","688","689","68a","68b","68c","68d","68e",
"68f","68g","68h","68j","68k","68l","68m","68n","68p","68q","68r","68t","68u","68v","68w","68x","68y","68z","691","692","693","694","695","696","697",
"698","699","69a","69b","69c","69d","69e","69f","69g","69h","69j","69k","69l","69m","69n","69p","69q","69r","69t","69u","69v"]

export function GET(request: NextRequest) {
  const searchParams = request.nextUrl.searchParams;
  const query = searchParams.get("query");

  if (!query) {
    return new Response(JSON.stringify({ error: "Missing query" }), {
      status: 400,
      headers: { "Content-Type": "application/json" },
    });
  }

  if (!roll_range.includes(query.toLowerCase())) {
    return new Response(JSON.stringify({ error: "❌ Roll number not found." }), {
      status: 404,
      headers: { "Content-Type": "application/json" },
    });
  }

  // Construct photo URL
  const roll_suffix = query.toUpperCase();
  const url = `http://portal.teleuniv.in/public/pics/24BD1A0${roll_suffix}.jpg?timer=1`;

  return new Response(JSON.stringify({ result: `✅ Roll found`, photo: url }), {
    headers: { "Content-Type": "application/json" },
  });
}